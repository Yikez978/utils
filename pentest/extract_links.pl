#!/usr/bin/perl

use HTML::LinkExtor;
use LWP::Simple;

die "usage: $0 <url>\n" unless @ARGV == 1;

my $doc = get($ARGV[0]) or die "$0: unable to get  URL in: $ARGV[0]\n";
my $parser = HTML::LinkExtor->new(undef, $ARGV[0]);
$parser->parse($doc)->eof;

my %hash = ();

foreach my $linkarray ($parser->links) {
	$hash{$$linkarray[2]} = $$linkarray[0];
}

foreach my $key (sort { $hash{$a} cmp $hash{$b} or $a cmp $b }
	keys %hash) {
	printf qq[%-6s %s\n], $hash{$key}, $key;
}
	
